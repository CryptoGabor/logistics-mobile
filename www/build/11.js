webpackJsonp([11],{433:function(l,n,u){"use strict";function t(l){return i._27(0,[(l()(),i._4(0,0,null,null,20,"div",[],null,null,null,null,null)),(l()(),i._25(-1,null,["\n                "])),(l()(),i._4(2,0,null,null,0,"img",[["class","profile-pic left"]],[[8,"src",4]],null,null,null,null)),(l()(),i._25(-1,null,["\n                "])),(l()(),i._25(-1,null,["\n                "])),(l()(),i._4(5,0,null,null,14,"div",[["class","chat-bubble left slide-left"]],null,null,null,null,null)),(l()(),i._25(-1,null,["\n\n                    "])),(l()(),i._4(7,0,null,null,1,"div",[["autolinker",""],["class","message"]],[[8,"innerHTML",1]],null,null,null,null)),(l()(),i._25(-1,null,["\n                    "])),(l()(),i._25(-1,null,["\n\n                    "])),(l()(),i._4(10,0,null,null,8,"div",[["class","message-detail"]],null,null,null,null,null)),(l()(),i._25(-1,null,["\n                        "])),(l()(),i._4(12,0,null,null,1,"span",[["class","bold"]],null,null,null,null,null)),(l()(),i._25(13,null,["",""])),(l()(),i._25(-1,null,[",\n                        "])),(l()(),i._4(15,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),i._25(16,null,["",""])),i._21(17,2),(l()(),i._25(-1,null,["\n                    "])),(l()(),i._25(-1,null,["\n\n                "])),(l()(),i._25(-1,null,["\n            "]))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.senderAvatar);l(n,7,0,n.parent.context.$implicit.text);l(n,13,0,n.parent.context.$implicit.sender.username);l(n,16,0,i._26(n,16,0,l(n,17,0,i._18(n.parent.parent.parent,0),n.parent.context.$implicit.dateCreated,"ago")))})}function e(l){return i._27(0,[(l()(),i._4(0,0,null,null,19,"div",[],null,null,null,null,null)),(l()(),i._25(-1,null,["\n\n                "])),(l()(),i._4(2,0,null,null,0,"img",[["class","profile-pic right"]],[[8,"src",4]],null,null,null,null)),(l()(),i._25(-1,null,["\n\n                "])),(l()(),i._4(4,0,null,null,14,"div",[["class","chat-bubble right slide-right"]],null,null,null,null,null)),(l()(),i._25(-1,null,["\n\n                    "])),(l()(),i._4(6,0,null,null,1,"div",[["autolinker",""],["class","message"]],[[8,"innerHTML",1]],null,null,null,null)),(l()(),i._25(-1,null,["\n                    "])),(l()(),i._25(-1,null,["\n\n                    "])),(l()(),i._4(9,0,null,null,8,"div",[["class","message-detail"]],null,null,null,null,null)),(l()(),i._25(-1,null,["\n                        "])),(l()(),i._4(11,0,null,null,1,"span",[["class","bold"]],null,null,null,null,null)),(l()(),i._25(12,null,["",""])),(l()(),i._25(-1,null,[",\n                        "])),(l()(),i._4(14,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),i._25(15,null,["",""])),i._21(16,2),(l()(),i._25(-1,null,["\n                    "])),(l()(),i._25(-1,null,["\n\n                "])),(l()(),i._25(-1,null,["\n\n            "]))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.senderAvatar);l(n,6,0,n.parent.context.$implicit.text);l(n,12,0,n.parent.context.$implicit.sender.username);l(n,15,0,i._26(n,15,0,l(n,16,0,i._18(n.parent.parent.parent,0),n.parent.context.$implicit.dateCreated,"ago")))})}function a(l){return i._27(0,[(l()(),i._4(0,0,null,null,9,"div",[["class","message-wrapper"]],null,[[null,"hold"]],function(l,n,u){var t=!0,e=l.component;if("hold"===n){t=!1!==e.onMessageHold(u,e.$index,l.context.$implicit)&&t}return t},null,null)),(l()(),i._25(-1,null,["\n            "])),(l()(),i.Z(16777216,null,null,1,null,t)),i._3(3,16384,null,0,B.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(l()(),i._25(-1,null,["\n\n            "])),(l()(),i.Z(16777216,null,null,1,null,e)),i._3(6,16384,null,0,B.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(l()(),i._25(-1,null,["\n\n            "])),(l()(),i._4(8,0,null,null,0,"div",[["class","cf"]],null,null,null,null,null)),(l()(),i._25(-1,null,["\n\n        "]))],function(l,n){var u=n.component;l(n,3,0,u.profile.user.username!==n.context.$implicit.sender.username);l(n,6,0,u.profile.user.username===n.context.$implicit.sender.username)},null)}function s(l){return i._27(0,[(l()(),i._4(0,0,null,null,4,"div",[],null,null,null,null,null)),(l()(),i._25(-1,null,["\n\n        "])),(l()(),i.Z(16777216,null,null,1,null,a)),i._3(3,802816,null,0,B.i,[i.N,i.K,i.s],{ngForOf:[0,"ngForOf"]},null),(l()(),i._25(-1,null,["\n    "]))],function(l,n){l(n,3,0,n.component.order.issue.chat.messages)},null)}function o(l){return i._27(0,[i._19(0,T.a,[]),i._23(402653184,1,{content:0}),(l()(),i._4(2,0,null,null,10,"ion-header",[],null,null,null,null,null)),i._3(3,16384,null,0,S.a,[$.a,i.k,i.E,[2,K.a]],null,null),(l()(),i._25(-1,null,["\n    "])),(l()(),i._4(5,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,M.b,M.a)),i._3(6,49152,null,0,N.a,[P.a,[2,K.a],[2,j.a],$.a,i.k,i.E],null,null),(l()(),i._25(-1,3,["\n        "])),(l()(),i._4(8,0,null,3,2,"ion-title",[],null,null,null,Z.b,Z.a)),i._3(9,49152,null,0,L.a,[$.a,i.k,i.E,[2,A.a],[2,N.a]],null,null),(l()(),i._25(-1,0,["Chat"])),(l()(),i._25(-1,3,["\n    "])),(l()(),i._25(-1,null,["\n"])),(l()(),i._25(-1,null,["\n"])),(l()(),i._4(14,0,null,null,5,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,O.b,O.a)),i._3(15,4374528,[[1,4]],0,U.a,[$.a,V.a,D.a,i.k,i.E,P.a,H.a,i.x,[2,K.a],[2,j.a]],null,null),(l()(),i._25(-1,1,["\n    "])),(l()(),i.Z(16777216,null,1,1,null,s)),i._3(18,16384,null,0,B.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(l()(),i._25(-1,1,["\n"])),(l()(),i._25(-1,null,["\n"])),(l()(),i._4(21,0,null,null,30,"ion-footer",[],null,null,null,null,null)),i._3(22,16384,null,0,q.a,[$.a,i.k,i.E,[2,K.a]],null,null),(l()(),i._25(-1,null,["\n    "])),(l()(),i._4(24,0,null,null,26,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var t=!0,e=l.component;if("submit"===n){t=!1!==i._18(l,26).onSubmit(u)&&t}if("reset"===n){t=!1!==i._18(l,26).onReset()&&t}if("submit"===n){t=!1!==e.send(e.chatBox)&&t}return t},null,null)),i._3(25,16384,null,0,r.u,[],null,null),i._3(26,540672,null,0,r.h,[[8,null],[8,null]],{form:[0,"form"]},null),i._22(2048,null,r.b,null,[r.h]),i._3(28,16384,null,0,r.o,[r.b],null,null),(l()(),i._25(-1,null,["\n        "])),(l()(),i._4(30,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,R.b,R.a)),i._3(31,1097728,null,3,J.a,[W.a,$.a,i.k,i.E,[2,X.a]],null,null),i._23(335544320,2,{contentLabel:0}),i._23(603979776,3,{_buttons:1}),i._23(603979776,4,{_icons:1}),i._3(35,16384,null,0,z.a,[],null,null),(l()(),i._25(-1,2,["\n            "])),(l()(),i._4(37,0,null,3,4,"ion-input",[["formControlName","message"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(l,n,u){var t=!0;if("ngModelChange"===n){t=!1!==(l.component.chatBox=u)&&t}return t},G.b,G.a)),i._3(38,671744,null,0,r.f,[[3,r.b],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i._22(2048,null,r.m,null,[r.f]),i._3(40,16384,null,0,r.n,[r.m],null,null),i._3(41,5423104,null,0,Q.a,[$.a,V.a,W.a,P.a,i.k,i.E,[2,U.a],[2,J.a],[2,r.m],D.a],{placeholder:[0,"placeholder"]},null),(l()(),i._25(-1,2,["\n            "])),(l()(),i._4(43,0,null,4,5,"button",[["clear",""],["ion-button",""],["item-end",""]],null,[[null,"click"]],function(l,n,u){var t=!0,e=l.component;if("click"===n){t=!1!==e.send(e.chatBox)&&t}return t},Y.b,Y.a)),i._3(44,1097728,[[3,4]],0,ll.a,[[8,""],$.a,i.k,i.E],{clear:[0,"clear"]},null),(l()(),i._25(-1,0,["\n                "])),(l()(),i._4(46,0,null,0,1,"ion-icon",[["class","footer-btn"],["name","send"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i._3(47,147456,null,0,nl.a,[$.a,i.k,i.E],{name:[0,"name"]},null),(l()(),i._25(-1,0,["\n            "])),(l()(),i._25(-1,2,["\n        "])),(l()(),i._25(-1,null,["\n    "])),(l()(),i._25(-1,null,["\n"])),(l()(),i._25(-1,null,["\n"]))],function(l,n){var u=n.component;l(n,18,0,u.order.issue);l(n,26,0,u.messageForm);l(n,38,0,"message",u.chatBox);l(n,41,0,i._7(1,"Send ",u.toUser.user.username," a message..."));l(n,44,0,"");l(n,47,0,"send")},function(l,n){l(n,5,0,i._18(n,6)._hidden,i._18(n,6)._sbPadding);l(n,14,0,i._18(n,15).statusbarPadding,i._18(n,15)._hasRefresher);l(n,24,0,i._18(n,28).ngClassUntouched,i._18(n,28).ngClassTouched,i._18(n,28).ngClassPristine,i._18(n,28).ngClassDirty,i._18(n,28).ngClassValid,i._18(n,28).ngClassInvalid,i._18(n,28).ngClassPending);l(n,37,0,i._18(n,40).ngClassUntouched,i._18(n,40).ngClassTouched,i._18(n,40).ngClassPristine,i._18(n,40).ngClassDirty,i._18(n,40).ngClassValid,i._18(n,40).ngClassInvalid,i._18(n,40).ngClassPending);l(n,46,0,i._18(n,47)._hidden)})}Object.defineProperty(n,"__esModule",{value:!0});var i=u(0),r=(u(2),u(20)),c=(u(15),u(152)),_=u(43),d=u(48),p=u(62),f=u(175),g=function(){function l(l,n,u,t,e,a,s,o,i){this.navCtrl=l,this.formBuilder=n,this.navParams=u,this.orderService=t,this.authenticationService=e,this.translate=a,this.viewCtrl=s,this.userService=o,this.issueService=i,this.messageForm=n.group({message:new r.e("")}),this.chatBox="",this.order=this.navParams.get("order"),this.toUser=this.isCourier()?this.order.buyer:this.order.courier,this.profile=this.isCourier()?this.order.courier:this.order.buyer}return l.prototype.ionViewDidEnter=function(){var l=this;this.updateChat(),this.pollingInterval=setInterval(function(){l.updateChat()},5e3)},l.prototype.ionViewWillLeave=function(){clearInterval(this.pollingInterval)},l.prototype.send=function(l){var n=this;l&&""!==l&&this.order.issue&&this.issueService.createChatMessage("",l,this.order.issue.chat.id).then(function(l){l.success&&(n.order.issue=l.issue,n.scrollToBottom())}),this.chatBox=""},l.prototype.scrollToBottom=function(){var l=this;setTimeout(function(){l.content.scrollToBottom()},100)},l.prototype.isCourier=function(){return this.userService.isLoggedAsCourier()},l.prototype.isCustomer=function(){return this.userService.isLoggedAsCustomer()},l.prototype.updateChat=function(){var l=this;this.issueService.getIssue(this.order.id).subscribe(function(n){n.success&&(l.order.issue=n.issue)})},l}(),m=u(145),b=u(153),h=function(){return function(){}}(),v=u(367),k=u(368),C=u(369),x=u(370),y=u(371),I=u(372),w=u(373),E=u(374),F=u(375),B=u(14),T=u(377),S=u(150),$=u(3),K=u(6),M=u(465),N=u(49),P=u(10),j=u(23),Z=u(464),L=u(146),A=u(61),O=u(376),U=u(24),V=u(5),D=u(11),H=u(29),q=u(180),R=u(149),J=u(18),W=u(16),X=u(45),z=u(63),G=u(469),Q=u(156),Y=u(41),ll=u(21),nl=u(42),ul=u(12),tl=i._2({encapsulation:2,styles:[],data:{}}),el=i._0("page-messages",g,function(l){return i._27(0,[(l()(),i._4(0,0,null,null,1,"page-messages",[],null,null,null,o,tl)),i._3(1,49152,null,0,g,[j.a,r.d,ul.a,c.a,_.a,d.k,K.a,p.a,f.a],null,null)],null,null)},{},{},[]),al=u(25),sl=u(147),ol=u(44);u.d(n,"MessagesPageModuleNgFactory",function(){return il});var il=i._1(h,[],function(l){return i._15([i._16(512,i.i,i.X,[[8,[v.a,k.a,C.a,x.a,y.a,I.a,w.a,E.a,F.a,el]],[3,i.i],i.v]),i._16(4608,B.l,B.k,[i.u,[2,B.t]]),i._16(4608,r.v,r.v,[]),i._16(4608,r.d,r.d,[]),i._16(5120,d.g,m.b,[al.c]),i._16(4608,d.c,d.f,[]),i._16(4608,d.i,d.d,[]),i._16(4608,d.b,d.a,[]),i._16(4608,d.k,d.k,[d.n,d.g,d.c,d.i,d.b,d.l,d.m]),i._16(512,b.a,b.a,[]),i._16(512,B.b,B.b,[]),i._16(512,r.s,r.s,[]),i._16(512,r.i,r.i,[]),i._16(512,r.q,r.q,[]),i._16(512,sl.a,sl.a,[]),i._16(512,sl.b,sl.b,[]),i._16(512,d.h,d.h,[]),i._16(512,m.a,m.a,[]),i._16(512,h,h,[]),i._16(256,d.m,void 0,[]),i._16(256,d.l,void 0,[]),i._16(256,ol.a,g,[])])})},464:function(l,n,u){"use strict";function t(l){return e._27(2,[(l()(),e._4(0,0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),e._3(1,278528,null,0,a.h,[e.s,e.t,e.k,e.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e._17(null,0)],function(l,n){l(n,1,0,"toolbar-title","toolbar-title-"+n.component._mode)},null)}u.d(n,"a",function(){return s}),n.b=t;var e=u(0),a=u(14),s=(u(3),e._2({encapsulation:2,styles:[],data:{}}))},465:function(l,n,u){"use strict";function t(l){return e._27(0,[(l()(),e._4(0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),e._3(1,278528,null,0,a.h,[e.s,e.t,e.k,e.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),e._4(2,0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(l,n,u){var t=!0;if("click"===n){t=!1!==l.component.backButtonClick(u)&&t}return t},s.b,s.a)),e._3(3,278528,null,0,a.h,[e.s,e.t,e.k,e.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e._3(4,1097728,null,0,o.a,[[8,"bar-button"],i.a,e.k,e.E],null,null),(l()(),e._4(5,0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),e._3(6,278528,null,0,a.h,[e.s,e.t,e.k,e.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e._3(7,147456,null,0,r.a,[i.a,e.k,e.E],{name:[0,"name"]},null),(l()(),e._4(8,0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),e._3(9,278528,null,0,a.h,[e.s,e.t,e.k,e.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),e._25(10,null,["",""])),e._17(null,0),e._17(null,1),e._17(null,2),(l()(),e._4(14,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),e._3(15,278528,null,0,a.h,[e.s,e.t,e.k,e.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e._17(null,3)],function(l,n){var u=n.component;l(n,1,0,"toolbar-background","toolbar-background-"+u._mode);l(n,3,0,"back-button","back-button-"+u._mode);l(n,6,0,"back-button-icon","back-button-icon-"+u._mode);l(n,7,0,u._bbIcon);l(n,9,0,"back-button-text","back-button-text-"+u._mode);l(n,15,0,"toolbar-content","toolbar-content-"+u._mode)},function(l,n){var u=n.component;l(n,2,0,u._hideBb);l(n,5,0,e._18(n,7)._hidden);l(n,10,0,u._backText)})}u.d(n,"a",function(){return c}),n.b=t;var e=u(0),a=u(14),s=u(41),o=u(21),i=u(3),r=u(42),c=(u(6),u(23),e._2({encapsulation:2,styles:[],data:{}}))},469:function(l,n,u){"use strict";function t(l){return i._27(0,[(l()(),i._4(0,0,[[1,0],["textInput",1]],null,1,"input",[["class","text-input"],["dir","auto"]],[[8,"type",0],[1,"aria-labelledby",0],[1,"min",0],[1,"max",0],[1,"step",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(l,n,u){var t=!0,e=l.component;if("input"===n){t=!1!==e.onInput(u)&&t}if("blur"===n){t=!1!==e.onBlur(u)&&t}if("focus"===n){t=!1!==e.onFocus(u)&&t}if("keydown"===n){t=!1!==e.onKeydown(u)&&t}return t},null,null)),i._3(1,278528,null,0,r.h,[i.s,i.t,i.k,i.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(l,n){l(n,1,0,"text-input","text-input-"+n.component._mode)},function(l,n){var u=n.component;l(n,0,0,u._type,u._labelId,u.min,u.max,u.step,u.autocomplete,u.autocorrect,u.placeholder,u._disabled,u._readonly)})}function e(l){return i._27(0,[(l()(),i._4(0,0,[[1,0],["textInput",1]],null,1,"textarea",[["class","text-input"]],[[1,"aria-labelledby",0],[1,"autocomplete",0],[1,"autocorrect",0],[8,"placeholder",0],[8,"disabled",0],[8,"readOnly",0]],[[null,"input"],[null,"blur"],[null,"focus"],[null,"keydown"]],function(l,n,u){var t=!0,e=l.component;if("input"===n){t=!1!==e.onInput(u)&&t}if("blur"===n){t=!1!==e.onBlur(u)&&t}if("focus"===n){t=!1!==e.onFocus(u)&&t}if("keydown"===n){t=!1!==e.onKeydown(u)&&t}return t},null,null)),i._3(1,278528,null,0,r.h,[i.s,i.t,i.k,i.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null)],function(l,n){l(n,1,0,"text-input","text-input-"+n.component._mode)},function(l,n){var u=n.component;l(n,0,0,u._labelId,u.autocomplete,u.autocorrect,u.placeholder,u._disabled,u._readonly)})}function a(l){return i._27(0,[(l()(),i._4(0,0,null,null,1,"button",[["class","text-input-clear-icon"],["clear",""],["ion-button",""],["tabindex","-1"],["type","button"]],null,[[null,"click"],[null,"mousedown"]],function(l,n,u){var t=!0,e=l.component;if("click"===n){t=!1!==e.clearTextInput(u)&&t}if("mousedown"===n){t=!1!==e.clearTextInput(u)&&t}return t},c.b,c.a)),i._3(1,1097728,null,0,_.a,[[8,""],d.a,i.k,i.E],{clear:[0,"clear"]},null)],function(l,n){l(n,1,0,"")},null)}function s(l){return i._27(0,[(l()(),i._4(0,0,null,null,0,"div",[["class","input-cover"]],null,[[null,"touchstart"],[null,"touchend"],[null,"mousedown"],[null,"mouseup"]],function(l,n,u){var t=!0,e=l.component;if("touchstart"===n){t=!1!==e._pointerStart(u)&&t}if("touchend"===n){t=!1!==e._pointerEnd(u)&&t}if("mousedown"===n){t=!1!==e._pointerStart(u)&&t}if("mouseup"===n){t=!1!==e._pointerEnd(u)&&t}return t},null,null))],null,null)}function o(l){return i._27(2,[i._23(671088640,1,{_native:0}),(l()(),i.Z(16777216,null,null,1,null,t)),i._3(2,16384,null,0,r.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(l()(),i.Z(16777216,null,null,1,null,e)),i._3(4,16384,null,0,r.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(l()(),i.Z(16777216,null,null,1,null,a)),i._3(6,16384,null,0,r.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null),(l()(),i.Z(16777216,null,null,1,null,s)),i._3(8,16384,null,0,r.j,[i.N,i.K],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,2,0,!u._isTextarea);l(n,4,0,u._isTextarea);l(n,6,0,u._clearInput);l(n,8,0,u._useAssist)},null)}u.d(n,"a",function(){return p}),n.b=o;var i=u(0),r=u(14),c=u(41),_=u(21),d=u(3),p=(u(5),u(16),u(11),i._2({encapsulation:2,styles:[],data:{}}))}});